#+TITLE: README for Vagrant dev linux box
#+AUTHOR:   Roman Shestakov
#+LANGUAGE: en

* Description

A base Vagrant VM provisioned with puppet and librarian-puppet. The VM
uses standard Debian precise64 box. It could be used as a base box for certain dev
projects as it has provisioning for some basic tools.

* On startup the VM runs the shell scripts to install:
- essential build tools.
- ruby
- puppet
- erlang
- librarian-puppet
- texinfo

* VM would also execute the Puppet setup installs:
- emacs v24.4
- emacs.d from https://github.com/RomanShestakov/.emacs.d.git

* How to create a base box:
https://scotch.io/tutorials/how-to-create-a-vagrant-base-box-from-an-existing-one

- check vm from github and provision it
#+BEGIN_SRC
git clone https://github.com/RomanShestakov/vm.git
cd vm
vagrant up
#+END_SRC

- package newly provisioned box into a new base box
#+BEGIN_SRC
# package the VM into a new vagrant box.
# this will create ros.box file in the vm dir
vagrant package --output ros.box
# add the new box into Vagrant install into ~/.vagrant.d/boxes on the local host
# make sure ros.box file is removed from vm dir
vagrant box add rosbox ros.box --force
#+END_SRC

- init new Vagrant box:
#+BEGIN_SRC
# this will create a Vagrantfile in the current dir
vagrant init rosbox
#+END_SRC

- Vagrant file example
#+BEGIN_SRC
# -*- mode: ruby -*-
# vi: set ft=ruby :
Vagrant.configure("2") do |config|
  config.vm.box = "roxbox"
  config.vm.network "private_network", ip: "192.168.33.10"
  config.vm.hostname = "rosbox"
  config.vm.synced_folder ".", "/var/www", :mount_options => ["dmode=777", "fmode=666"]
end
#+END_SRC
